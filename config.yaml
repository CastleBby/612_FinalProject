# Configuration for Precipitation Forecasting Project
data:
  start_date: '2000-01-01'
  end_date: '2024-12-31'  # Extended to 25 years for better generalization
  locations:  # Lat/Lon for 5 representative MD stations (cities as proxies)
    - name: 'Baltimore'
      lat: 39.29
      lon: -76.61
    - name: 'Annapolis'
      lat: 38.98
      lon: -76.49
    - name: 'Cumberland'
      lat: 39.62
      lon: -78.76
    - name: 'Ocean City'
      lat: 38.34
      lon: -75.08
    - name: 'Hagerstown'
      lat: 39.64
      lon: -77.72
  variables: ['temperature_2m', 'relative_humidity_2m', 'precipitation', 'pressure_msl', 'wind_speed_10m', 'cloudcover', 'dewpoint_2m', 'winddirection_10m']
  seq_len: 24  # Input sequence length (hours)
  pred_horizon: 1  # Predict next 1 hour
  test_split: 0.15  # For eval; adjust for full data
  val_split: 0.15

model:
  d_model: 512  # Increased model capacity
  nhead: 8
  num_layers: 6  # Deeper network for complex patterns
  embed_dim: 128  # Increased embedding dimension
  dropout: 0.15  # Slightly higher dropout for regularization
  lr: 0.0001  # Lower LR for multi-task stability
  batch_size: 128  # Larger batch for stable gradients
  epochs: 100  # More epochs for convergence
  device: 'mps'  # For M1 Max acceleration
  gradient_clip: 1.0  # Gradient clipping for stability
  weight_decay: 0.01  # L2 regularization
  warmup_epochs: 10  # Learning rate warmup
  feature_groups:  # For domain-aware embeddings (total: 14 features = 8 weather + 6 temporal)
    thermo: [0, 1, 6]       # temperature_2m, relative_humidity_2m, dewpoint_2m
    hydro: [2, 3]           # precipitation, pressure_msl
    dynamic: [4, 7]         # wind_speed_10m, winddirection_10m
    optical: [5]            # cloudcover
    temporal_diurnal: [8, 9]   # hour_sin, hour_cos (daily cycle)
    temporal_seasonal: [10, 11, 12, 13]  # day_sin, day_cos, month_sin, month_cos (seasonal patterns)
  extreme_weight: 10.0  # Increased weight for heavy rain events

eval:
  extreme_threshold: 0.9  # 90th percentile for extremes
  rain_threshold: 0.1  # mm for event detection
  prediction_threshold: 0.20  # mm - predictions below this are set to 0 (OPTIMIZED on 2000-2024 data: maximizes CSI=0.5739)
